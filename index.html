<!DOCTYPE html>
<html>
<head>
<title>Air Brush!</title>

<style type="text/css">
	html, body {
		border: 0px;
		margin: 0px;
		height: 100%;
	}
	
	#display {
		width: 100%;
		height: 100%;
		background-color: #000;
		transform: matrix(-1,0,0,1,0,0);
		-o-transform: matrix(-1,0,0,1,0,0);
		-ms-transform: matrix(-1,0,0,1,0,0);
		-moz-transform: matrix(-1,0,0,1,0,0);
		-webkit-transform: matrix(-1,0,0,1,0,0);
	}
</style>

</head>
<body>

<canvas id="display"></canvas>

<script type="text/javascript" src="script/include.js"></script>
<script type="text/javascript">

var canvas = $("#display")[0];
var ctx = canvas.getContext("2d");
var cap;
var pts = [];

var track = new Tracker();
track.init(function() {
	track.setTracking(true);
	cap = track.getCap();
	canvas.width = cap.width();
	canvas.height = cap.height();

	track.onframe=function(cap) {	
		var cx = cap.width() >> 1;
		var cy = cap.height() >> 1;

		ctx.save();
			cap.captureContext2d(ctx);
			ctx.globalAlpha = 0.5;
			ctx.fillRect(0, 0, canvas.width, cy - 50);
			ctx.fillRect(0, cy-50, cx- 50, 100);
			ctx.fillRect(0, cy+50, canvas.width, cy - 50);
			ctx.fillRect(cx + 50, cy-50, cx- 50, 100);
		ctx.restore();
		
		pts = pts.concat(track.getPoints());

		ctx.save();
			ctx.strokeStyle="#09f";
			ctx.beginPath();
			
			if(pts.length > 0)
				ctx.moveTo(pts[0].x, pts[0].y);
				
			for(var i=1; i<pts.length; ++i)
				ctx.lineTo(pts[i].x, pts[i].y);
					
			ctx.stroke();
		ctx.restore();
	}
});

</script>

</body>
</html>
